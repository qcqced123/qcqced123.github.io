---
title: "ğŸ‘©â€ğŸ’»ğŸ„ [baekjoon] 1987ë²ˆ: ì•ŒíŒŒë²³"
excerpt: "ë°±ì¤€ 1987ë²ˆ: ì•ŒíŒŒë²³"
permalink: "/ps/baekjoon-1987"
toc: true  # option for table of contents
toc_sticky: true  # option for table of content
categories:
  - Problem Solving
tags:
  - Python
  - Codeing Test
  - Algorithm
  - Baekjoon
  - Graph
  - DFS
  - BackTracking
last_modified_at: 2024-01-30T12:00:00-05:00
---

### **`ğŸ–ï¸Â solution`**

```python
import sys
from typing import List

def backtracking(y: int, x: int, count: int, visit: List, graph: List[List]):
    global result
    visit[ord(graph[y][x]) - 65] = True
    result.add(count)

    for i in range(4):
        ny, nx = dy[i] + y, dx[i] + x
        if -1 < ny < r and -1 < nx < c and not visit[ord(graph[ny][nx]) - 65]:
            backtracking(ny, nx, count+1, visit, graph)
            visit[ord(graph[ny][nx]) - 65] = False

r, c = map(int, sys.stdin.readline().split())

result = set()
dy, dx = (-1, 1, 0, 0), (0, 0, -1, 1)
grid, visited = [list(map(str, sys.stdin.readline().rstrip())) for _ in range(r)], [False] * 26
backtracking(0, 0, 1, visited, grid)
print(max(result))
```

### **`ğŸ’¡Â idea`**

- **Back Tracking**
- **1) ë°©ë¬¸ ê¸°ë¡ ë°°ì—´ ë³€ê²½**
    - **ì¡°ê±´ ì¤‘ì—ì„œ ê²½ë¡œì— ì•ŒíŒŒë²³ ì¤‘ë³µì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì  ì´ìš©**
    - **ì „ì²´ ê²©ì ì‚¬ì´ì¦ˆì™€ ë™ì¼í•œ ë°°ì—´ ëŒ€ì‹  ì•ŒíŒŒë²³ ì‚¬ì´ì¦ˆ(26)ë§Œ ì„ ì–¸**

ì¼ë°˜ì ì¸ ë°±íŠ¸ë˜í‚¹ ë¬¸ì œë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ íŒŒì´ì¬ìœ¼ë¡œ í•´ê²°í•˜ë ¤ëŠ” ê²½ìš° ì‹œê°„, ë©”ëª¨ë¦¬ ì œí•œ ë•Œë¬¸ì— ë¹¡ì„¼ ì½”ë“œ ìµœì í™”ê°€ í•„ìš”í•˜ë‹¤. ê²©ì ë¬¸ì œë¼ì„œ `bfs` ì„ íƒë„ ê°€ëŠ¥í•œë° ê·¸ë ‡ë‹¤ë©´ `python3`ë¡œë„ í•´ê²°ê°€ëŠ¥í•˜ë‹¤. í•œí¸, ì¼ë°˜ì ì¸ `dfs`ë¼ë©´ ë¹¡ì„¼ ìµœì í™”ë¥¼ í†µí•´ `pypy3`ìœ¼ë¡œë§Œ í†µê³¼ ê°€ëŠ¥í•˜ë‹¤.

ë¬¸ì œë¥¼ ë¦¬ë·°í•˜ë˜ ë„ì¤‘ ì¼ë°˜ì ì¸ `dfs` ë°±íŠ¸ë˜í‚¹ ë°©ì‹ì˜ ë¹„íš¨ìœ¨ì„±ì— ëŒ€í•´ ê³ ì°°í•´ë´¤ë‹¤. ì•„ë˜ì™€ ê°™ì€ ì…ë ¥ì´ ìˆë‹¤.

```python
IEFCJ
FHFKC
FFALF
HFGCF
HMCHH
```

ì¼ë°˜ì ì¸ ë°±íŠ¸ë˜í‚¹ ì•Œê³ ë¦¬ì¦˜ì´ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì„ ìƒê°í•´ë³´ì. ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì¹ í•´ì§„ ê¸€ìë¥¼ `IFHE` ìˆœì„œë¡œ íƒìƒ‰í–ˆë‹¤ë©´, ë‹¤ìŒì€ `F`ë¥¼ íƒìƒ‰í•´ ë°©ë¬¸í•´ë„ ë˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ íŒì •í•  ê²ƒì´ë‹¤. ì´ë¯¸ `F`ëŠ” ë°©ë¬¸í–ˆê¸° ë•Œë¬¸ì— ì•„ë§ˆë„ ìŠ¤íƒ í”„ë ˆì„ í• ë‹¹ì„ ì·¨ì†Œí•˜ë©´ì„œ, ê²°êµ­ì—ëŠ” `I`ê¹Œì§€ ë˜ëŒì•„ ê°ˆ ê²ƒì´ë‹¤. 

ê·¸ë¦¬ê³  ë‹¤ì‹œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” `E`ë¥¼  ë°©ë¬¸í•œ ë’¤, `FCK` ìˆœì„œë¡œ ë°©ë¬¸í•˜ê²Œ ë  ê²ƒì´ë‹¤. ì´ ë•Œ ë“¤ê²Œ ë˜ëŠ” ì˜ë¬¸ì€ ë°”ë¡œ ì´ë ‡ë‹¤. êµ³ì´ `I`ê¹Œì§€ ë˜ëŒì•„ê°”ë‹¤ê°€ íƒìƒ‰í•´ì•¼ í• ê¹Œ?? ì´ë¯¸ `IE` ëŠ” íƒìƒ‰ì´ ê°€ëŠ¥í•œ ê²½ë¡œë¼ëŠ” ê²ƒì„ ìš°ë¦¬ëŠ” ì¶©ë¶„íˆ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ `DP Tabulation` ê°œë…ì„ ì°¨ìš©í•œë‹¤ë©´ í›¨ì”¬ ë¹ ë¥´ê²Œ í’€ì´ê°€ ê°€ëŠ¥í•  ê²ƒì´ë‹¤.

ê²½ë¡œì˜ ìœ ì¼ì„±ì„ ë³´ì¥í•˜ë©´ì„œ ìˆ˜ì • ê°€ëŠ¥í•œ ìë£Œêµ¬ì¡°ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ë°°ì—´ ëŒ€ì‹  ì„¸íŠ¸ë¥¼ ì‚¬ìš©í•´ë³´ì. ì„¸íŠ¸ì—ëŠ” í˜„ì¬ê¹Œì§€ì˜ ê²½ë¡œ ê·¸ë¦¬ê³  í•´ë‹¹ ê²½ë¡œì˜ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•´ì¤˜ì•¼ í•œë‹¤. ê°™ì€ ê²½ë¡œë¼ê³  í•  ì§€ë¼ë„ ì„œë¡œ ë‹¤ë¥¸ ì¸ë±ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì¡Œì„ ê°€ëŠ¥ì„±ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ë ‡ê²Œ ì„¸íŠ¸ë¥¼ êµ¬ì„±í•œ ë’¤, í•˜ë‚˜ì”© popí•´ì„œ ê²½ë¡œë¥¼ ì–»ì–´ë‚¸ë‹¤. ê·¸ ë‹¤ìŒ í•´ë‹¹ ê²½ë¡œë¡œë¶€í„° íŒŒìƒë˜ëŠ” ì—¬ëŸ¬ ì ì¬ì  ê²½ë¡œë“¤ì„ ëª¨ë‘ ê²€ì‚¬í•´ ê²½ë¡œê°€ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ íŒì •í•˜ë©´ ëœë‹¤. ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```python
import sys

def dfs(y: int, x: int) -> int:
    dp, result = set(), 0
    dp.add((y, x, grid[y][x]))
    while dp:
        vy, vx, path = dp.pop()
        result = max(result, len(path))
        if result == 26:
            return 26
        for i in range(4):
            ny, nx = dy[i] + vy, dx[i] + vx
            if -1 < ny < r and -1 < nx < c and grid[ny][nx] not in path:
                dp.add((ny, nx, grid[ny][nx] + path))
                
    return result

r, c = map(int, sys.stdin.readline().split())
dy, dx = (-1, 1, 0, 0), (0, 0, -1, 1)
grid = [list(map(str, sys.stdin.readline().rstrip())) for _ in range(r)]
print(dfs(0, 0))
```

<p markdown="1" align="center">
![Common BackTracking](/assets/images/ps/after.png){: .align-center}{: width="100%", height="100%"}{: .image-caption}
__*Common BackTracking*__
</p>

<p markdown="1" align="center">
![DP Tabulation BackTracking](/assets/images/ps/before.png){: .align-center}{: width="100%", height="100%"}{: .image-caption}
__*DP Tabulation BackTracking*__
</p>

ìœ„ì—ëŠ” ê°œì„ ì´ì „ ê²°ê³¼ê³  ì•„ë˜ëŠ” ê°œì„  ì´í›„ ê²°ê³¼ë‹¤. ë¹„ì•½ì ì¸ ì†ë„ ìƒìŠ¹í•˜ëŠ” ë™ì‹œì— ë©”ëª¨ë¦¬ ì—­ì‹œ 3ë°°ë‚˜ ëœ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì´ë‹¤. ì„¸íŠ¸ì— ìˆëŠ” ìœ ë‹ˆí¬í•œ ê²½ë¡œë“¤ì„ í•˜ë‚˜ì”© êº¼ë‚´ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆê¸° ë•Œë¬¸ì— ì•Œê³ ë¦¬ì¦˜ ì„±ëŠ¥ì´ ì‹œë“œì— ì˜í–¥(`set.pop()`ì€ ëœë¤ìœ¼ë¡œ ì›ì†Œ ì„ íƒ)ì„ ë°›ëŠ”ë‹¤ëŠ” ì ë§Œ ê°ì•ˆí•œë‹¤ë©´ ë§¤ìš° ì¢‹ì€ í’€ì´ë¼ê³  ìƒê°í•œë‹¤.
